<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pricing Table</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <section id="pricing-table">
        <div class="container">
            <div class="headlines">
                <h2>SUPPORT HEALTHY WEIGHT FOR ONLY $1.39/DAY!</h2>
            </div>
            <div class="pricing-table">
                <div class="option">
                    <div class="title">
                        <p>SPECIAL OFFER!</p>
                        <h4>50% OFF</h4>
                        <h3>1 Bag</h3>
                    </div>
                    <img class="product-img" src="https://dist1.skinnyfitdetox.com/images/pricing-table/2025/Strawberry-Watermelon_GWP_1.png">
                    <div class="star-rating">
                        <img src="https://dist1.skinnyfitdetox.com/images/Detox/stars/four-half-stars.png">
                        <p>30,697 Reviews</p>
                    </div>
                    <div class="pricing">
                        <p class="msrp">Price: <span>$99.95</span></p>
                        <p class="price"><span>With Deal: </span>$49.95</p>
                        <div class="free-items">
                            <p>+ FREE Shipping</p>
                            <p>+ FREE Lip Balm ($28 value)</p>
                            <p>+ FREE Silk Scrunchie ($22 value)</p>
                        </div>
                        <div class="button-container">
                            <cta-sw-1item-sub>
                              <button type="button" class="cta-sw-1item-sub my-button" data-product-id="9417409560821" data-variant-id="47302004277493" data-selling-plan-id="4823482613">SUBSCRIBE & SAVE »</button>
                            </cta-sw-1item-sub>
                            <p>Monthly Savings <span class="checkmark"></span> Cancel Anytime</p>
                        </div>
                    </div>
                </div>
                <div class="option">
                    <div class="best-value-tag">
                        <p>2 for 1</p>
                    </div>
                    <div class="title">
                        <p>SPECIAL OFFER!</p>
                        <h4>60% OFF</h4>
                        <h3>2 Bags</h3>
                    </div>
                    <img class="product-img" src="https://dist1.skinnyfitdetox.com/images/pricing-table/2025/Strawberry-Watermelon_GWP_2.png">
                    <div class="star-rating">
                            <img src="https://dist1.skinnyfitdetox.com/images/Detox/stars/four-half-stars.png">
                            <p>30,697 Reviews</p>
                        </div>
                    <div class="pricing">
                        <p class="msrp">Price: <span>$199.90</span></p>
                        <p class="price"><span>With Deal: </span>$79.95</p>
                        <div class="free-items">
                            <p>+ FREE Shipping</p>
                            <p>+ FREE Lip Balm ($28 value)</p>
                            <p>+ FREE Silk Scrunchie ($22 value)</p>
                        </div>
                        <div class="button-container">
                            <cta-sw-2item-sub>
                              <button type="button" class="cta-sw-2item-sub my-button" data-product-id="9417436463349" data-variant-id="47302070108405" data-selling-plan-id="4823515381">SUBSCRIBE & SAVE »</button>
                            </cta-sw-2item-sub>
                            <p>Monthly Savings <span class="checkmark"></span> Cancel Anytime</p>
                            <cta-sw-2item-otp>
                              <button class="cta-sw-2item-otp my-button border" type="button" data-product-id="9417435775221" data-variant-id="47302066831605">ONE TIME PURCHASE »</button>
                            </cta-sw-2item-otp>
                            <p>One-Time Savings</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bottom-copy">
                <p>QUESTIONS? E-mail <a href="mailto:hello@skinnyfit.com">hello@skinnyfit.com</a> or call <a href="tel:+18888621758">1-888-862-1758</a></p>
            </div>
        </div>
    </section>
    <script>
      (function() {
        class CtaSw1ItemSub extends HTMLElement {
          constructor() {
            super();
            this.button = this.querySelector('.cta-sw-1item-sub');
          }

          connectedCallback() {
            this.button.addEventListener('click', this.handleBuyNow.bind(this));
          }

          async handleBuyNow(event) {
            event.preventDefault();
            
            const button = event.target;
            const variantId = button.dataset.variantId;
            const sellingPlanId = button.dataset.sellingPlanId;
            
            if (!variantId) {
              console.error('No variant ID found');
              return;
            }

            button.disabled = true;
            const originalText = button.textContent;
            button.textContent = 'Processing...';

            try {
              const response = await fetch('/cart/clear.js', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
              });

              if (response.ok) {
                if (window.location.pathname === '/cart') {
                  window.location.reload();
                } else {
                  document.dispatchEvent(new CustomEvent('cart:refresh'));
                  
                  const cartCountElements = document.querySelectorAll('[data-cart-count], .cart-count, #cart-icon-bubble');
                  cartCountElements.forEach(element => {
                    if (element.querySelector('span')) {
                      element.querySelector('span').textContent = '0';
                    } else {
                      element.textContent = '0';
                    }
                  });
                }
              } else {
                console.error('Failed to clear cart');
              }
            } catch (error) {
              console.error('Error clearing cart:', error);
            }

            try {
              const formData = {
                items: [, {
                  id: '47312317776117',
                  quantity: 1
                }, {
                  id: '47312298475765',
                  quantity: 1
                }, {
                  id: variantId,
                  quantity: 1,
                  selling_plan: sellingPlanId
                }]
              };

              const response = await fetch('/cart/add.js', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
              });

              if (!response.ok) {
                throw new Error('Failed to add to cart');
              }

              window.location.href = '/checkout';
              setTimeout(function () {
                button.textContent = originalText;
              }, 1000);
            } catch (error) {
              console.error('Error:', error);
              button.textContent = originalText;
              button.disabled = false;
              alert('There was an error processing your request. Please try again.');
            }
          }
        }

        customElements.define('cta-sw-1item-sub', CtaSw1ItemSub);
      })();
    </script>
    <script>
      (function() {
        class CtaSw2ItemSub extends HTMLElement {
          constructor() {
            super();
            this.button = this.querySelector('.cta-sw-2item-sub');
          }

          connectedCallback() {
            this.button.addEventListener('click', this.handleBuyNow.bind(this));
          }

          async handleBuyNow(event) {
            event.preventDefault();
            
            const button = event.target;
            const variantId = button.dataset.variantId;
            const sellingPlanId = button.dataset.sellingPlanId;
            
            if (!variantId) {
              console.error('No variant ID found');
              return;
            }

            button.disabled = true;
            const originalText = button.textContent;
            button.textContent = 'Processing...';

            try {
              const response = await fetch('/cart/clear.js', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
              });

              if (response.ok) {
                if (window.location.pathname === '/cart') {
                  window.location.reload();
                } else {
                  document.dispatchEvent(new CustomEvent('cart:refresh'));
                  
                  const cartCountElements = document.querySelectorAll('[data-cart-count], .cart-count, #cart-icon-bubble');
                  cartCountElements.forEach(element => {
                    if (element.querySelector('span')) {
                      element.querySelector('span').textContent = '0';
                    } else {
                      element.textContent = '0';
                    }
                  });
                }
              } else {
                console.error('Failed to clear cart');
              }
            } catch (error) {
              console.error('Error clearing cart:', error);
            }

            try {
              const formData = {
                items: [, {
                  id: '47312317776117',
                  quantity: 1
                }, {
                  id: '47312298475765',
                  quantity: 1
                }, {
                  id: variantId,
                  quantity: 1,
                  selling_plan: sellingPlanId
                }]
              };

              const response = await fetch('/cart/add.js', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
              });

              if (!response.ok) {
                throw new Error('Failed to add to cart');
              }

              window.location.href = '/checkout';
              setTimeout(function () {
                button.textContent = originalText;
              }, 1000);
            } catch (error) {
              console.error('Error:', error);
              button.textContent = originalText;
              button.disabled = false;
              alert('There was an error processing your request. Please try again.');
            }
          }
        }

        customElements.define('cta-sw-2item-sub', CtaSw2ItemSub);
      })();
    </script>
    <script>
      (function() {
        class CtaSw2ItemOtp extends HTMLElement {
          constructor() {
          super();
          this.button = this.querySelector('.cta-sw-2item-otp');
          this.productId = this.button.getAttribute('data-product-id');
          this.variantId = this.button.getAttribute('data-variant-id');
        }

          connectedCallback() {
          this.button.addEventListener('click', this.handleClick.bind(this));
        }

          async handleClick(event) {
          event.preventDefault();
          
          if (this.button.disabled) return;

          const button = event.target;
          button.disabled = true;
          const originalText = button.textContent;
          button.textContent = 'Processing...';

          try {
            const response = await fetch('/cart/clear.js', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
            });

            if (response.ok) {
              if (window.location.pathname === '/cart') {
                window.location.reload();
              } else {
                document.dispatchEvent(new CustomEvent('cart:refresh'));
                
                const cartCountElements = document.querySelectorAll('[data-cart-count], .cart-count, #cart-icon-bubble');
                cartCountElements.forEach(element => {
                  if (element.querySelector('span')) {
                    element.querySelector('span').textContent = '0';
                  } else {
                    element.textContent = '0';
                  }
                });
              }
            } else {
              console.error('Failed to clear cart');
            }
          } catch (error) {
            console.error('Error clearing cart:', error);
          }

          try {
            const formData = {
                items: [, {
                  id: '47312317776117',
                  quantity: 1
                }, {
                  id: '47312298475765',
                  quantity: 1
                }, {
                  id: this.variantId,
                  quantity: 1
                }]
              };

            const response = await fetch('/cart/add.js', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData)
            });

            if (!response.ok) {
              throw new Error('Failed to add to cart');
            }

            window.location.href = '/checkout';
            setTimeout(function () {
              button.textContent = originalText;
            }, 1000);
          } catch (error) {
            console.error('Error:', error);
            button.textContent = originalText;
            button.disabled = false;
            alert('There was an error processing your request. Please try again.');
          }
        }
        }

        customElements.define('cta-sw-2item-otp', CtaSw2ItemOtp);
      })();
    </script>
  </body>
</html>